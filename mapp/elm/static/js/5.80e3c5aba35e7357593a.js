webpackJsonp([5],{K2DC:function(t,i){},L835:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e={data:function(){return{noResult:!1,touchShow:!1,currentFirst:"",diff:-1,scrollY:-1,currentIndex:0,optionsCity:{},cityValue:"",currentCityShow:!1,alphabet:[],cityList:[],searchArr:[],cityHeightArr:[],titleName:"城市选择",cityName:"",cityA:""}},created:function(){this.touch={},this.getCity(),this.$route.query.cityName&&(this.currentCityShow=!0,this.cityA=JSON.parse(this.$route.query.cityName),this.cityName=JSON.parse(this.$route.query.cityName).name)},mounted:function(){},methods:{switchCity:function(t){this.cityName=t.name,this.$router.push({path:"/shippingAddress",query:{position:JSON.stringify(t)}})},refresh:function(){this.$refs.scroll5.refresh()},getCity:function(){var t=this;this.$api.get("/apis/b/lib/city-list@0.0.3/city_list.json").then(function(i){t.alphabet=i.alphabet,t.cityList=i.cityList,t.$refs.scroll5.refresh()})},searchCity:function(){var t=this;if(this.currentCityShow=!1,""!==this.cityValue){var i=[];this.cityList.forEach(function(s){s.cities.forEach(function(s){(0===s.pinyin.indexOf(t.cityValue)||s.name.indexOf(t.cityValue)>-1)&&i.push(s)})}),this.searchArr=i,0===this.searchArr.length?this.noResult=!0:(this.noResult=!1,this.$refs.scroll6.refresh())}},scrollCity:function(t){this.scrollY=t.y},calcListHight:function(){var t=[],i=this.$refs.cityList,s=0;t.push(s),i.forEach(function(i,e){s+=i.clientHeight,t.push(s)}),this.cityHeightArr=t},ontouchstart:function(t){var i,s,e,r=(i=t.target,s="index",e?i.setAttribute("data-"+s,e):i.getAttribute("data-"+s)),c=t.touches[0];this.touch.y1=c.pageY,this.touch.anchorIndex=r,this.currentFirst=this.alphabet[r],this._scrollTo(r),this.touchShow=!0},ontouchmove:function(t){this.touchShow=!0;var i=t.touches[0];this.touch.y2=i.pageY;var s=(this.touch.y2-this.touch.y1)/22|0,e=parseInt(this.touch.anchorIndex)+s;e<0?this.currentFirst=this.alphabet[0]:e>this.alphabet.length-1?this.currentFirst=this.alphabet[this.alphabet.length-1]:this.currentFirst=this.alphabet[e],this._scrollTo(e)},ontouchEnd:function(){var t=this;setTimeout(function(){t.touchShow=!1},2e3)},_scrollTo:function(t){(t||0===t)&&(t<0?t=0:t>this.cityHeightArr.length-2&&(t=this.cityHeightArr.length-2),this.scrollY=-this.cityHeightArr[t],this.$refs.scroll5.scrollToElement(this.$refs.cityList[t],0))}},computed:{fixedTitle:function(){if(!(this.scrollY>0)&&this.cityList.length)return this.cityList[this.currentIndex].idx}},watch:{scrollY:function(t){if(t>0)this.currentIndex=0;else{for(var i=0;i<this.cityHeightArr.length-1;i++){var s=this.cityHeightArr[i],e=this.cityHeightArr[i+1];if(-t>=s&&-t<e)return this.currentIndex=i,void(this.diff=e+t)}this.currentIndex=this.cityHeightArr.length-2}},diff:function(t){var i=void 0;if(i=t>0&&t<40?t-40:0,this.fixedTop===i)return!1;this.fixedTop=i,this.$refs.fixed.style.transform="translate3d(0, "+i+"px,0)"},cityList:function(){var t=this;setTimeout(function(){t.calcListHight()},20)}},components:{fixedTop:function(t){return s.e(11).then(function(){var i=[s("4Xkx")];t.apply(null,i)}.bind(this)).catch(s.oe)}}},r={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"city-w"},[s("div",{staticClass:"fixed-city"},[s("fixed-top",{attrs:{"title-name":t.titleName,isGoBack:!0}}),t._v(" "),s("div",{staticClass:"top"},[s("div",{staticClass:"input-w"},[s("div",{staticClass:"icon-search"},[s("svg",{staticClass:"icon-fangdajing",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[s("path",{attrs:{"fill-opacity":".38",d:"M14.778 13.732a.739.739 0 1 1-1.056 1.036l-2.515-2.565a.864.864 0 0 1-.01-1.206 4.894 4.894 0 0 0 1.357-3.651c-.126-2.492-2.156-4.52-4.648-4.647a4.911 4.911 0 0 0-5.16 5.163c.126 2.475 2.13 4.496 4.605 4.642.451.026.896-.008 1.326-.1a.739.739 0 0 1 .308 1.446c-.56.12-1.137.164-1.72.13-3.227-.19-5.83-2.815-5.995-6.042a6.39 6.39 0 0 1 6.71-6.715c3.25.165 5.884 2.8 6.05 6.048a6.37 6.37 0 0 1-1.374 4.3l2.12 2.161z"}})])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cityValue,expression:"cityValue",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"输入城市名或者拼音"},domProps:{value:t.cityValue},on:{input:[function(i){i.target.composing||(t.cityValue=i.target.value.trim())},t.searchCity],blur:function(i){t.$forceUpdate()}}})])])],1),t._v(" "),s("div",{staticClass:"city-content"},[t.currentCityShow?s("div",{staticClass:"current-city"},[s("div",{staticClass:"title nowrap"},[t._v("当前定位城市")]),t._v(" "),s("div",{staticClass:"address-t nowrap",on:{click:function(i){t.switchCity(t.cityA)}}},[t._v(t._s(t.cityName))])]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""===t.cityValue,expression:"cityValue === ''"}],ref:"wrapper",staticClass:"result-c"},[s("cube-scroll",{ref:"scroll5",attrs:{"scroll-events":["scroll"],data:t.cityList},on:{scroll:t.scrollCity}},t._l(t.cityList,function(i,e){return s("ul",{key:e,ref:"cityList",refInFor:!0,staticClass:"current-city"},[s("h3",{staticClass:"title nowrap"},[t._v(t._s(i.idx))]),t._v(" "),t._l(i.cities,function(i){return s("li",{key:i.id,staticClass:"address-s nowrap",on:{click:function(s){t.switchCity(i)}}},[s("div",{staticClass:"list"},[t._v(t._s(i.name))])])})],2)})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.fixedTitle,expression:"fixedTitle"}],ref:"fixed",staticClass:"fixed-title",class:{"chocse-h":t.currentCityShow}},[s("div",{staticClass:"fixed-t"},[t._v(t._s(t.fixedTitle))])])],1),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:""!==t.cityValue,expression:"cityValue !== ''"}],ref:"wrapper2",staticClass:"current-city scroll-w"},[s("cube-scroll",{ref:"scroll6",attrs:{"scroll-events":["scroll"],data:t.searchArr}},[t._l(t.searchArr,function(i){return s("li",{key:i.id,staticClass:"address-s nowrap",on:{click:function(s){t.switchCity(i)}}},[s("div",{staticClass:"list"},[t._v(t._s(i.name))])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noResult,expression:"noResult"}],staticClass:"noresult"},[t._v("无结果")])],2)],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.touchShow,expression:"touchShow"}],staticClass:"fixed-b"},[s("div",{staticClass:"first-t"},[t._v(t._s(t.currentFirst))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""===t.cityValue,expression:"cityValue === ''"}],staticClass:"city-first-w"},[s("ul",{staticClass:"city-first",on:{touchstart:function(i){return i.stopPropagation(),i.preventDefault(),t.ontouchstart(i)},touchmove:function(i){return i.stopPropagation(),i.preventDefault(),t.ontouchmove(i)},touchend:function(i){return i.stopPropagation(),i.preventDefault(),t.ontouchEnd(i)}}},t._l(t.alphabet,function(i,e){return s("li",{key:e,staticClass:"acronym",class:{"current-list":t.currentIndex===e},attrs:{"data-index":e}},[t._v(t._s(i))])}))])])},staticRenderFns:[]};var c=s("VU/8")(e,r,!1,function(t){s("K2DC")},"data-v-a5a6ed20",null);i.default=c.exports}});
//# sourceMappingURL=5.80e3c5aba35e7357593a.js.map