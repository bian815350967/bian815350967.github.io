{"version":3,"sources":["webpack:///src/page/city/city.vue","webpack:///./src/assets/js/dom.js","webpack:///./src/page/city/city.vue?3144","webpack:///./src/page/city/city.vue"],"names":["city","data","noResult","touchShow","currentFirst","diff","scrollY","currentIndex","optionsCity","cityValue","currentCityShow","alphabet","cityList","searchArr","cityHeightArr","titleName","cityName","cityA","created","this","touch","getCity","$route","query","JSON","parse","name","mounted","methods","switchCity","list","$router","push","path","position","stringify","refresh","$refs","scroll5","_this","$api","get","then","res","searchCity","_this2","cityArr","forEach","item","cities","pinyin","indexOf","length","scroll6","scrollCity","pos","y","calcListHight","hightArr","listItem","height","index","clientHeight","ontouchstart","e","el","val","aIndex","target","setAttribute","getAttribute","firstTouch","touches","y1","pageY","anchorIndex","_scrollTo","ontouchmove","y2","delta","parseInt","ontouchEnd","_this3","setTimeout","scrollToElement","computed","fixedTitle","idx","watch","newY","i","height1","height2","newVal","fixedTop","fixed","style","transform","_this4","components","resolve","__webpack_require__","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","catch","oe","city_city","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title-name","isGoBack","_v","xmlns","viewBox","fill-opacity","d","directives","rawName","value","expression","modifiers","trim","type","placeholder","domProps","on","input","$event","composing","blur","$forceUpdate","click","_s","_e","ref","scroll-events","scroll","_l","key","refInFor","id","class","chocse-h","touchstart","stopPropagation","preventDefault","touchmove","touchend","current-list","data-index","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.80e3c5aba35e7357593a.js","sourcesContent":["<template>\n  <div class=\"city-w\">\n    <div class=\"fixed-city\">\n      <fixed-top :title-name=\"titleName\" :isGoBack=\"true\"></fixed-top>\n      <div class=\"top\">\n        <div class=\"input-w\">\n          <div class=\"icon-search\">\n            <svg class=\"icon-fangdajing\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-opacity=\".38\" d=\"M14.778 13.732a.739.739 0 1 1-1.056 1.036l-2.515-2.565a.864.864 0 0 1-.01-1.206 4.894 4.894 0 0 0 1.357-3.651c-.126-2.492-2.156-4.52-4.648-4.647a4.911 4.911 0 0 0-5.16 5.163c.126 2.475 2.13 4.496 4.605 4.642.451.026.896-.008 1.326-.1a.739.739 0 0 1 .308 1.446c-.56.12-1.137.164-1.72.13-3.227-.19-5.83-2.815-5.995-6.042a6.39 6.39 0 0 1 6.71-6.715c3.25.165 5.884 2.8 6.05 6.048a6.37 6.37 0 0 1-1.374 4.3l2.12 2.161z\"></path></svg>\n          </div>\n          <input type=\"text\" placeholder=\"输入城市名或者拼音\" class=\"input\" @input=\"searchCity\" v-model.trim=\"cityValue\">\n        </div>\n      </div>\n    </div>\n    <div class=\"city-content\">\n      <div class=\"current-city\" v-if=\"currentCityShow\">\n        <div class=\"title nowrap\">当前定位城市</div>\n        <div class=\"address-t nowrap\" @click=\"switchCity(cityA)\">{{cityName}}</div>\n      </div>\n      <!--所有城市-->\n      <div class=\"result-c\" ref=\"wrapper\" v-show=\"cityValue === ''\">\n        <cube-scroll\n          ref=\"scroll5\"\n          :scroll-events=\"['scroll']\"\n          @scroll=\"scrollCity\"\n          :data=\"cityList\">\n          <ul class=\"current-city\" v-for=\"(city, index) in cityList\" :key=\"index\" ref=\"cityList\">\n            <h3 class=\"title nowrap\">{{city.idx}}</h3>\n            <li class=\"address-s nowrap\" v-for=\"list in city.cities\" :key=\"list.id\" @click=\"switchCity(list)\">\n              <div class=\"list\">{{list.name}}</div>\n            </li>\n          </ul>\n        </cube-scroll>\n        <div class=\"fixed-title\" v-show=\"fixedTitle\" ref=\"fixed\" :class=\"{'chocse-h': currentCityShow}\">\n          <div class=\"fixed-t\">{{fixedTitle}}</div>\n        </div>\n      </div>\n      <!-- 搜索结果-->\n      <ul class=\"current-city scroll-w\" v-show=\"cityValue !== ''\" ref=\"wrapper2\">\n        <cube-scroll\n          ref=\"scroll6\"\n          :scroll-events=\"['scroll']\"\n          :data=\"searchArr\">\n          <li class=\"address-s nowrap\" v-for=\"item in searchArr\" :key=\"item.id\" @click=\"switchCity(item)\">\n            <div class=\"list\">{{item.name}}</div>\n          </li>\n          <div class=\"noresult\" v-show=\"noResult\">无结果</div>\n        </cube-scroll>\n      </ul>\n    </div>\n    <!--显示触摸的首字母-->\n    <div class=\"fixed-b\" v-show=\"touchShow\">\n      <div class=\"first-t\">{{currentFirst}}</div>\n    </div>\n    <!--首字母导航-->\n    <div class=\"city-first-w\" v-show=\"cityValue === ''\">\n      <ul class=\"city-first\" @touchstart.stop.prevent=\"ontouchstart\" @touchmove.stop.prevent=\"ontouchmove\" @touchend.stop.prevent=\"ontouchEnd\">\n        <li class=\"acronym\" v-for=\"(item, index) in alphabet\" :data-index=\"index\" :key=\"index\" :class=\"{'current-list': currentIndex === index}\">{{item}}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport {getData} from '@/assets/js/dom'\nconst TITLE_HEIGHT = 40\nconst ANCHOR_HEIGHT = 22\n\nexport default {\n  data () {\n    return {\n      noResult: false,\n      touchShow: false,\n      currentFirst: '',\n      diff: -1,\n      scrollY: -1,\n      currentIndex: 0,\n      optionsCity: {},\n      cityValue: '',\n      currentCityShow: false,\n      alphabet: [],\n      cityList: [],\n      searchArr: [],\n      cityHeightArr: [],\n      titleName: '城市选择',\n      cityName: '',\n      cityA: ''\n    }\n  },\n  created () {\n    this.touch = {}\n    this.getCity()\n    if (this.$route.query.cityName) {\n      this.currentCityShow = true\n      this.cityA = JSON.parse(this.$route.query.cityName)\n      this.cityName = JSON.parse(this.$route.query.cityName).name\n    }\n  },\n  mounted () {\n  },\n  methods: {\n    switchCity (list) {\n      this.cityName = list.name\n      this.$router.push({\n        path: '/shippingAddress',\n        query: {\n          position: JSON.stringify(list)\n        }\n      })\n    },\n    refresh () {\n      this.$refs.scroll5.refresh()\n    },\n    // 获取城市\n    getCity () {\n      this.$api.get('/apis/b' + '/lib/city-list@0.0.3/city_list.json').then(res => {\n        this.alphabet = res.alphabet\n        this.cityList = res.cityList\n        this.$refs.scroll5.refresh()\n      })\n    },\n    // 搜索城市\n    searchCity () {\n      this.currentCityShow = false\n      if (this.cityValue !== '') {\n        let cityArr = []\n        this.cityList.forEach(item => {\n          item.cities.forEach(list => {\n            if (list.pinyin.indexOf(this.cityValue) === 0 || list.name.indexOf(this.cityValue) > -1) {\n              cityArr.push(list)\n            }\n          })\n        })\n        this.searchArr = cityArr\n        if (this.searchArr.length === 0) {\n          this.noResult = true\n        } else {\n          this.noResult = false\n          this.$refs.scroll6.refresh()\n        }\n      }\n    },\n    // 滚动时y轴的高度\n    scrollCity (pos) {\n      this.scrollY = pos.y\n    },\n    // 计算每个字母所在城市 距离顶部的高度\n    calcListHight () {\n      let hightArr = []\n      let listItem = this.$refs.cityList\n      let height = 0\n      hightArr.push(height)\n      listItem.forEach((item, index) => {\n        height += item.clientHeight\n        hightArr.push(height)\n      })\n      this.cityHeightArr = hightArr\n    },\n    // 滑动开始\n    ontouchstart (e) {\n      let aIndex = getData(e.target, 'index')\n      let firstTouch = e.touches[0]\n      this.touch.y1 = firstTouch.pageY\n      this.touch.anchorIndex = aIndex\n      this.currentFirst = this.alphabet[aIndex]\n      this._scrollTo(aIndex)\n      this.touchShow = true\n    },\n    // 滑动时\n    ontouchmove (e) {\n      this.touchShow = true\n      let firstTouch = e.touches[0]\n      this.touch.y2 = firstTouch.pageY\n      let delta = (this.touch.y2 - this.touch.y1) / ANCHOR_HEIGHT | 0\n      let aIndex = parseInt(this.touch.anchorIndex) + delta\n      if (aIndex < 0) {\n        this.currentFirst = this.alphabet[0]\n      } else if (aIndex > this.alphabet.length - 1) {\n        this.currentFirst = this.alphabet[this.alphabet.length - 1]\n      } else {\n        this.currentFirst = this.alphabet[aIndex]\n      }\n      this._scrollTo(aIndex)\n    },\n    // 滑动结束了\n    ontouchEnd () {\n      setTimeout(() => {\n        this.touchShow = false\n      }, 2000)\n    },\n    _scrollTo (index) {\n      if (!index && index !== 0) {\n        return\n      }\n      if (index < 0) {\n        index = 0\n      } else if (index > this.cityHeightArr.length - 2) {\n        index = this.cityHeightArr.length - 2\n      }\n      this.scrollY = -this.cityHeightArr[index]\n      this.$refs.scroll5.scrollToElement(this.$refs.cityList[index], 0)\n    }\n  },\n  computed: {\n    // 首字母标题\n    fixedTitle () {\n      if (this.scrollY > 0 || !this.cityList.length) {\n        return\n      }\n      return this.cityList[this.currentIndex].idx\n    }\n  },\n  watch: {\n    // scroll 滚动\n    scrollY (newY) {\n      // 下拉\n      if (newY > 0) {\n        this.currentIndex = 0\n        return\n      }\n      // 滚动到中间\n      for (let i = 0; i < this.cityHeightArr.length - 1; i++) {\n        let height1 = this.cityHeightArr[i]\n        let height2 = this.cityHeightArr[i + 1]\n        if (-newY >= height1 && -newY < height2) {\n          this.currentIndex = i\n          this.diff = height2 + newY\n          return\n        }\n      }\n      // 最后一个小于高度\n      this.currentIndex = this.cityHeightArr.length - 2\n    },\n    diff (newVal) {\n      let fixedTop\n      if (newVal > 0 && newVal < TITLE_HEIGHT) {\n        fixedTop = newVal - TITLE_HEIGHT\n      } else {\n        fixedTop = 0\n      }\n      if (this.fixedTop === fixedTop) {\n        return false\n      }\n      this.fixedTop = fixedTop\n      this.$refs.fixed.style.transform = `translate3d(0, ${fixedTop}px,0)`\n    },\n    cityList () {\n      setTimeout(() => {\n        this.calcListHight()\n      }, 20)\n    }\n  },\n  components: {\n    fixedTop: resolve => require(['@/components/fixedTop'], resolve)\n  }\n}\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\" scoped>\n.city-w\n  width: 100%\n  min-height 100%\n  background-color: #fff\n  .scroll-w\n    width: 100%\n    height: 100%\n    .noresult\n      text-align: center\n      margin-top: 100px\n      font-size: 14px\n      color #333\n  .fixed-city\n    width: 100%\n    position: fixed\n    left: 0\n    top: 0\n    z-index: 10\n    background-image: linear-gradient(90deg,#0af,#0085ff);\n    .top\n      padding:0 20px 10px 20px\n    .input-w\n      position: relative\n      .icon-search\n        position: absolute\n        left: 10px\n        top: 50%\n        transform translateY(-50%)\n        width: 14px\n        height: 14px\n      .input\n        width: 100%\n        padding: 8px 8px 8px 30px\n        border-radius 15px\n        background-color: #fff\n        font-size: 12px\n  .city-content\n    position: fixed\n    left: 0\n    top: 90px\n    bottom: 0\n    width: 100%\n    .result-c\n      width: 100%\n      height: 100%\n    .current-city\n      position: relative\n      z-index: 20\n      .title\n        background-color: #f5f5f5\n        padding: 0 30px 0 10px\n        font-size: 12px\n        color #666\n        line-height: 40px\n        border-bottom: 1px solid #ddd\n      .address-t\n        background-color: #fff\n        padding: 0 30px 0 10px\n        font-size: 14px\n        color #000\n        line-height: 50px\n    .address-s\n      background-color: #fff\n      padding-left: 10px\n      font-size: 14px\n      color #000\n      line-height: 50px\n      &:last-child\n        .list\n          border-bottom: none\n      .list\n        padding-right: 30px\n        border-bottom: 1px solid #ddd\n  .city-first-w\n    position: fixed\n    right: 10px\n    top: 50%\n    transform translateY(-50%)\n    margin-top: 45px\n    .acronym\n      text-align: center\n      color #999\n      font-size: 10px\n      padding: 5px\n      &.current-list\n        color #0089dc\n  .fixed-title\n    position: absolute\n    left: 0\n    top: 0\n    width: 100%\n    z-index: 10\n    &.chocse-h\n      top: 91px\n    .fixed-t\n      background-color: #f5f5f5;\n      padding: 0 30px 0 10px;\n      font-size: 12px;\n      color: #666;\n      line-height: 40px;\n      border-bottom: 1px solid #ddd;\n  .fixed-b\n    position: fixed\n    right: 50px\n    top: 50%\n    transform translateY(-50%)\n    .first-t\n      width: 40px\n      height: 40px\n      border-radius 50%\n      display flex\n      align-items center\n      justify-content center\n      color #fff\n      background-color: #0089dc\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/city/city.vue","export function getData (el, name, val) {\n  const prefix = 'data-'\n  if (val) {\n    return el.setAttribute(prefix + name, val)\n  }\n  return el.getAttribute(prefix + name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/dom.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"city-w\"},[_c('div',{staticClass:\"fixed-city\"},[_c('fixed-top',{attrs:{\"title-name\":_vm.titleName,\"isGoBack\":true}}),_vm._v(\" \"),_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"input-w\"},[_c('div',{staticClass:\"icon-search\"},[_c('svg',{staticClass:\"icon-fangdajing\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 16 16\"}},[_c('path',{attrs:{\"fill-opacity\":\".38\",\"d\":\"M14.778 13.732a.739.739 0 1 1-1.056 1.036l-2.515-2.565a.864.864 0 0 1-.01-1.206 4.894 4.894 0 0 0 1.357-3.651c-.126-2.492-2.156-4.52-4.648-4.647a4.911 4.911 0 0 0-5.16 5.163c.126 2.475 2.13 4.496 4.605 4.642.451.026.896-.008 1.326-.1a.739.739 0 0 1 .308 1.446c-.56.12-1.137.164-1.72.13-3.227-.19-5.83-2.815-5.995-6.042a6.39 6.39 0 0 1 6.71-6.715c3.25.165 5.884 2.8 6.05 6.048a6.37 6.37 0 0 1-1.374 4.3l2.12 2.161z\"}})])]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.cityValue),expression:\"cityValue\",modifiers:{\"trim\":true}}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"输入城市名或者拼音\"},domProps:{\"value\":(_vm.cityValue)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.cityValue=$event.target.value.trim()},_vm.searchCity],\"blur\":function($event){_vm.$forceUpdate()}}})])])],1),_vm._v(\" \"),_c('div',{staticClass:\"city-content\"},[(_vm.currentCityShow)?_c('div',{staticClass:\"current-city\"},[_c('div',{staticClass:\"title nowrap\"},[_vm._v(\"当前定位城市\")]),_vm._v(\" \"),_c('div',{staticClass:\"address-t nowrap\",on:{\"click\":function($event){_vm.switchCity(_vm.cityA)}}},[_vm._v(_vm._s(_vm.cityName))])]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cityValue === ''),expression:\"cityValue === ''\"}],ref:\"wrapper\",staticClass:\"result-c\"},[_c('cube-scroll',{ref:\"scroll5\",attrs:{\"scroll-events\":['scroll'],\"data\":_vm.cityList},on:{\"scroll\":_vm.scrollCity}},_vm._l((_vm.cityList),function(city,index){return _c('ul',{key:index,ref:\"cityList\",refInFor:true,staticClass:\"current-city\"},[_c('h3',{staticClass:\"title nowrap\"},[_vm._v(_vm._s(city.idx))]),_vm._v(\" \"),_vm._l((city.cities),function(list){return _c('li',{key:list.id,staticClass:\"address-s nowrap\",on:{\"click\":function($event){_vm.switchCity(list)}}},[_c('div',{staticClass:\"list\"},[_vm._v(_vm._s(list.name))])])})],2)})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fixedTitle),expression:\"fixedTitle\"}],ref:\"fixed\",staticClass:\"fixed-title\",class:{'chocse-h': _vm.currentCityShow}},[_c('div',{staticClass:\"fixed-t\"},[_vm._v(_vm._s(_vm.fixedTitle))])])],1),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cityValue !== ''),expression:\"cityValue !== ''\"}],ref:\"wrapper2\",staticClass:\"current-city scroll-w\"},[_c('cube-scroll',{ref:\"scroll6\",attrs:{\"scroll-events\":['scroll'],\"data\":_vm.searchArr}},[_vm._l((_vm.searchArr),function(item){return _c('li',{key:item.id,staticClass:\"address-s nowrap\",on:{\"click\":function($event){_vm.switchCity(item)}}},[_c('div',{staticClass:\"list\"},[_vm._v(_vm._s(item.name))])])}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noResult),expression:\"noResult\"}],staticClass:\"noresult\"},[_vm._v(\"无结果\")])],2)],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.touchShow),expression:\"touchShow\"}],staticClass:\"fixed-b\"},[_c('div',{staticClass:\"first-t\"},[_vm._v(_vm._s(_vm.currentFirst))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cityValue === ''),expression:\"cityValue === ''\"}],staticClass:\"city-first-w\"},[_c('ul',{staticClass:\"city-first\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.ontouchstart($event)},\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.ontouchmove($event)},\"touchend\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.ontouchEnd($event)}}},_vm._l((_vm.alphabet),function(item,index){return _c('li',{key:index,staticClass:\"acronym\",class:{'current-list': _vm.currentIndex === index},attrs:{\"data-index\":index}},[_vm._v(_vm._s(item))])}))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a5a6ed20\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/city/city.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a5a6ed20\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./city.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./city.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./city.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a5a6ed20\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./city.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a5a6ed20\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/city/city.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}