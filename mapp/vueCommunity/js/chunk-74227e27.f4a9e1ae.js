(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74227e27"],{"0a49":function(t,e,a){var s=a("9b43"),i=a("626a"),n=a("4bf8"),o=a("9def"),r=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,h=e||r;return function(e,r,v){for(var p,b,_=n(e),m=i(_),w=s(r,v,3),g=o(m.length),y=0,C=a?h(e,g):c?h(e,0):void 0;g>y;y++)if((f||y in m)&&(p=m[y],b=w(p,y,_),t))if(a)C[y]=b;else if(b)switch(t){case 3:return!0;case 5:return p;case 6:return y;case 2:C.push(p)}else if(u)return!1;return d?-1:l||u?u:C}}},1169:function(t,e,a){var s=a("2d95");t.exports=Array.isArray||function(t){return"Array"==s(t)}},1220:function(t,e,a){},"20d6":function(t,e,a){"use strict";var s=a("5ca1"),i=a("0a49")(6),n="findIndex",o=!0;n in[]&&Array(1)[n](function(){o=!1}),s(s.P+s.F*o,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"27c9":function(t,e,a){"use strict";var s=a("1220"),i=a.n(s);i.a},"54ea":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fixed-top",{attrs:{title:t.title}}),a("cube-page",{staticClass:"scroll-w",attrs:{type:"tab-composite-view",title:"tab-composite"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("cube-tab-bar",{ref:"tabNav",attrs:{"show-slider":"","use-transition":t.disabled,data:t.tabLabels},model:{value:t.selectedLabel,callback:function(e){t.selectedLabel=e},expression:"selectedLabel"}}),a("div",{staticClass:"tab-slide-container"},[a("cube-slide",{ref:"slide",attrs:{loop:t.loop,"initial-index":t.initialIndex,"auto-play":t.autoPlay,"show-dots":t.showDots,options:t.slideOptions},on:{scroll:t.scroll,change:t.changePage}},[a("cube-slide-item",[a("cube-scroll",{attrs:{data:t.followersData,options:t.scrollOptions}},[a("ul",{staticClass:"list-wrapper"},[t._l(t.noReadData,function(e,s){return a("li",{key:s,staticClass:"list-item",on:{click:function(a){return t.gotoDetails(e)}}},[e.author?a("div",{staticClass:"avatar"},[a("div",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.author.avatar_url,expression:"item.author.avatar_url"}],attrs:{alt:""}})])]):t._e(),a("div",{staticClass:"content"},[a("div",{staticClass:"title-w"},[e.reply.content?a("h1",{staticClass:"title-c"},[t._v(" "+t._s(e.reply.content))]):a("h1",{staticClass:"title-c"},[t._v("此内容已被作者删除")])]),a("div",{staticClass:"title-w"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.topic,expression:"item.topic"}],staticClass:"title-msg"},[t._v("来自:《"+t._s(e.topic.title)+"》")])]),a("div",{staticClass:"desc-w"},[e.author?a("span",[t._v(t._s(e.author.loginname))]):t._e(),a("span",[t._v(t._s(t.$getDateDiff(e.last_reply_at)))])])])])}),0===t.noReadData.length?a("li",{staticClass:"no-data"},[t._v("暂无消息")]):t._e()],2)])],1),a("cube-slide-item",[a("cube-scroll",{attrs:{data:t.followersData,options:t.scrollOptions}},[a("ul",{staticClass:"list-wrapper"},[t._l(t.hasReadData,function(e,s){return a("li",{key:s,staticClass:"list-item",on:{click:function(a){return t.gotoDetails(e)}}},[e.author?a("div",{staticClass:"avatar"},[a("div",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.author.avatar_url,expression:"item.author.avatar_url"}],attrs:{alt:""}})])]):t._e(),a("div",{staticClass:"content"},[a("div",{staticClass:"title-w"},[e.reply.content?a("h1",{staticClass:"title-c"},[t._v(" "+t._s(e.reply.content))]):a("h1",{staticClass:"title-c"},[t._v("此内容已被作者删除")])]),a("div",{staticClass:"title-w"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.topic,expression:"item.topic"}],staticClass:"title-msg"},[t._v("来自:《"+t._s(e.topic.title)+"》")])]),a("div",{staticClass:"desc-w"},[e.author?a("span",[t._v(t._s(e.author.loginname))]):t._e(),a("span",[t._v(t._s(t.$getDateDiff(e.last_reply_at)))])])])])}),0===t.hasReadData.length?a("li",{staticClass:"no-data"},[t._v("暂无消息")]):t._e()],2)])],1)],1)],1)],1)]),a("v-tab-bar")],1)},i=[],n=(a("20d6"),a("7f7f"),{data:function(){return{title:"消息中心",selectedLabel:"未读消息",noReadData:[],hasReadData:[],disabled:!1,tabLabels:[{label:"未读消息"},{label:"已读消息"}],loop:!1,autoPlay:!1,showDots:!1,slideOptions:{listenScroll:!0,probeType:3,directionLockThreshold:0},scrollOptions:{directionLockThreshold:0},followersData:[],recommendData:[],hotData:[],accesstoken:""}},created:function(){var t=this;this.accesstoken=localStorage.getItem("__accesstoken__"),this.accesstoken?this.getMsg():this.$createDialog({type:"alert",title:"请先登录",confirmBtn:{text:"去登陆",active:!0,disabled:!1,href:"javascript:;"},onConfirm:function(){t.$router.push("/login")}}).show()},methods:{gotoDetails:function(t){this.$router.push({path:"/details",query:{id:t.topic.id}})},changePage:function(t){this.selectedLabel=this.tabLabels[t].label},scroll:function(t){var e=Math.abs(t.x),a=this.$refs.tabNav.$el.clientWidth,s=this.$refs.slide.slide.scrollerWidth,i=e/s*a;this.$refs.tabNav.setSliderTransform(i)},resolveTitle:function(t){return"".concat(t.name,"关注了问题 · ").concat(t.postTime," 小时前")},resolveQuestionFollowers:function(t){return"".concat(t.answers," 赞同 · ").concat(t.followers," 评论")},getMsg:function(){var t=this;this.$fetch.get("/messages",{accesstoken:this.accesstoken}).then(function(e){t.noReadData=e.data.hasnot_read_messages,t.hasReadData=e.data.has_read_messages})},findIndex:function(t,e){if(t.findIndex)return t.findIndex(e);var a=-1;return t.some(function(t,s,i){var n=e.call(this,t,s,i);if(n)return a=s,n}),a}},computed:{initialIndex:function(){var t=this,e=0;return e=this.findIndex(this.tabLabels,function(e){return e.label===t.selectedLabel}),e}},components:{fixedTop:function(t){return a.e("chunk-4fe77dfa").then(function(){var e=[a("e7d3")];t.apply(null,e)}.bind(this)).catch(a.oe)},CubePage:function(t){return a.e("chunk-b9ff4a9a").then(function(){var e=[a("3d70")];t.apply(null,e)}.bind(this)).catch(a.oe)},vTabBar:function(t){return a.e("chunk-aae7a332").then(function(){var e=[a("7eac")];t.apply(null,e)}.bind(this)).catch(a.oe)}}}),o=n,r=(a("27c9"),a("2877")),c=Object(r["a"])(o,s,i,!1,null,"bada2616",null);e["default"]=c.exports},"7f7f":function(t,e,a){var s=a("86cc").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in i||a("9e1e")&&s(i,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},cd1c:function(t,e,a){var s=a("e853");t.exports=function(t,e){return new(s(t))(e)}},e853:function(t,e,a){var s=a("d3f4"),i=a("1169"),n=a("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),s(e)&&(e=e[n],null===e&&(e=void 0))),void 0===e?Array:e}}}]);